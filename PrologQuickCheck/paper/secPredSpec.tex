% -*- mode: latex; mode: folding -*-

\section{Predicate Specification}
\label{sec:pred-spec}

Here we describe our predicate specification language following some of
the principles in.
\todo{cite Yves Deville's ``logic programming''}
%
There are several ways to state a predicate's specification, we do not
declare our specification process to be superior to others in any way.
%
It is just a form to express some predicate features we thought to be of
importance in a way that suited our needs.


Our general specification form of a predicate \yap{p/n} consists, in its
core, of a set of specification clauses about input types.
%
\begin{code}
predicate specification clause
  p Id
parameter input types
  T1, ..., Tn
\end{code}
%
Various aspects of the predicate for the particular input type in
question can be added to a specification clause.
%
\begin{code}
parameter relation
  irel([A1,...,An])
mode
  i(Mi1,...,Min), [o(Mo1,...,Mon)]
range
  {Min,Max}
pre/post conditions
  Goal
\end{code}


\subsection{Types}

As mentioned in \refSec{sec:generators}, types in \plqc{} differ from
the regular notion of type.
%
Our types are not defined by a set of \emph{ground} terms but rather by
the set of terms produced by a generator.
%
These are the types used in predicate specification and are also
the only mandatory part of the specification.
%
The reason for this is the goal of the specification, which is to be
automatically tested.
%
Types defined in this manner depict perfectly possible forms of
predicate input.
%
This approach for types already encloses, by domain definition, the type
precondition.


\begin{definition}
\label{def:type}
A {\em type} is a non-empty set of terms.
\end{definition}


The types mentioned in a predicate specification clause are \plqc{}
generators used to automatically create individual test cases.
%
This means that the type in a specification clause is partial in the
sense that it only specifies the predicate should succeed when given
elements of such types as parameters.
%
It states nothing about parameters of other kinds.
%
Other input types can be covered by other specification clauses with
different generators.
%
The effect of a procedure execution for types not covered by any of the
specification clauses is considered undefined.


\subsection{Domain Precondition}

The domain precondition is a restriction over the set of parameters of a
predicate.
%
Correct typing of parameters may be insufficient to express allowed
input.
%
Sometimes the arguments must obey a relation extending type information,
based on the actual values of the parameters.


\begin{definition}
\label{def:type}
A {\em domain precondition} is a non-empty set of terms.
\end{definition}

\subsection{Mode}
\subsection{Range}
\subsection{Properties}

